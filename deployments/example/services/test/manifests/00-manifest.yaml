apiVersion: v1
kind: Service
metadata:
  name: test
spec:
  ports:
  - name: http
    targetPort: 8000
    port: 80
  type: NodePort
  selector:
    app: example
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
 name: test-ingress
 annotations:
   kubernetes.io/ingress.class: "nginx"
   nginx.org/rewrites: "serviceName=test rewrite=/"
spec:
 rules:
 - host: k8s.curibio-test.com
   http:
     paths:
     - path: /test
       pathType: Prefix
       backend:
         service:
           name: test
           port:
             number: 80
